<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - geometry - cube</title>
        <meta charset="utf-8">
        <style>
            body {
                margin: 0px;
                background-color: #000000;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="vendor/js/three.min.js"></script>

        <script>

            var camera, scene, renderer;
            var karel_skin, karel_cloch;

            init();

            function init() {

                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
                camera.position.z = 400;

                scene = new THREE.Scene();
                
                var loader = new THREE.JSONLoader();
                var rand = Math.round(Math.random() * (3 - 1) + 1);
                var path = './meshes/mountain'+rand+'.json';
                alert(path);
                loader.load('./meshes/mountain'+rand+'.json', function(geometry) {
                    var material = new THREE.MeshLambertMaterial( { color: '#707070', wireframe: true, wireframeLinewidth: 2, depthTest: true, depthWrite: true } );
                    karel_cloch = new THREE.Mesh(geometry, material);
                    karel_cloch.scale.set(50, 50, 50);
                    scene.add(karel_cloch);
                    animate();
                });

                renderer = new THREE.WebGLRenderer();
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );
                document.body.appendChild( renderer.domElement );

                var light = new THREE.PointLight(0xffffff, 1, 0);
                light.position.set( 0, 500, 0 );
                scene.add(light);

                light = new THREE.AmbientLight( 0x707070 );
                scene.add( light );

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function animate() {

                requestAnimationFrame( animate );

                karel_cloch.rotation.x += 0.0025;
                karel_cloch.rotation.y += 0.005;

                setTimeout(function(){renderer.render( scene, camera )}, 100);

            }

        </script>

    </body>
</html>